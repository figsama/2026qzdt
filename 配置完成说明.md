# âœ… Firebase é…ç½®å·²å®Œæˆ

## ğŸ“ å·²å®Œæˆçš„é…ç½®

æˆ‘å·²ç»å¸®æ‚¨å®Œæˆäº†æ‰€æœ‰é…ç½®ï¼ä½¿ç”¨çš„æ˜¯æ‚¨çš„ Firebase é¡¹ç›®ï¼š**visamap-884ae**

### å·²æ›´æ–°çš„æ–‡ä»¶ï¼š

1. âœ… **visitor-tracker.js** - å·²å¡«å…¥ Firebase é…ç½®
2. âœ… **è®¿é—®ç»Ÿè®¡åœ°å›¾.html** - å·²å¡«å…¥ Firebase é…ç½®  
3. âœ… **index.html** - å·²å¯ç”¨ Firebase SDKï¼ˆå–æ¶ˆäº†æ³¨é‡Šï¼‰

### ä½¿ç”¨çš„é…ç½®ï¼š

```javascript
{
  apiKey: "AIzaSyDIyz1W_TnhtNgaNQkPNv131plJPoL4pwE",
  authDomain: "visamap-884ae.firebaseapp.com",
  projectId: "visamap-884ae",
  storageBucket: "visamap-884ae.firebasestorage.app",
  messagingSenderId: "755802981286",
  appId: "1:755802981286:web:f3c2a89009f4bf1d5dc567"
}
```

**æ³¨æ„**ï¼šæˆ‘å·²ç»åˆ é™¤äº† `databaseURL` å’Œ `measurementId`ï¼Œå› ä¸ºæˆ‘ä»¬åªä½¿ç”¨ Firestoreã€‚

## âš ï¸ é‡è¦ï¼šæ‚¨è¿˜éœ€è¦åœ¨ Firebase Console å®Œæˆä»¥ä¸‹æ­¥éª¤

### æ­¥éª¤ 1ï¼šå¯ç”¨ Firestore Database

1. è®¿é—®ï¼šhttps://console.firebase.google.com/project/visamap-884ae/overview
2. åœ¨å·¦ä¾§èœå•æ‰¾åˆ° **"Firestore Database"**ï¼ˆä¸æ˜¯ "Realtime Database"ï¼‰
3. ç‚¹å‡» "åˆ›å»ºæ•°æ®åº“"
4. é€‰æ‹© **"ä»¥æµ‹è¯•æ¨¡å¼å¯åŠ¨"**
5. é€‰æ‹©ä½ç½®ï¼š**asia-east1** æˆ– **asia-northeast1**ï¼ˆç¦»ä¸­å›½è¿‘ï¼‰
6. ç‚¹å‡» "å¯ç”¨"

### æ­¥éª¤ 2ï¼šé…ç½®å®‰å…¨è§„åˆ™

åœ¨ Firestore Database é¡µé¢ï¼š
1. ç‚¹å‡» "è§„åˆ™" æ ‡ç­¾
2. å°†è§„åˆ™æ”¹ä¸ºï¼š

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /visits/{visit} {
      allow read, create: if true;
      allow update, delete: if false;
    }
  }
}
```

3. ç‚¹å‡» "å‘å¸ƒ"

## ğŸš€ éƒ¨ç½²åˆ° GitHub

ç°åœ¨æ‚¨å¯ä»¥å°†ä»£ç æ¨é€åˆ° GitHubï¼š

```bash
git add .
git commit -m "é…ç½® Firebase è®¿é—®ç»Ÿè®¡åŠŸèƒ½"
git push origin master
```

ç­‰å¾… 1-2 åˆ†é’Ÿè®© GitHub Pages é‡æ–°éƒ¨ç½²ã€‚

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### æµ‹è¯• 1ï¼šæ£€æŸ¥ä¸»é¡µè¿½è¸ª

1. è®¿é—®ï¼šhttps://figsama.github.io/2026qzdt/
2. æŒ‰ F12 æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°
3. åº”è¯¥çœ‹åˆ°ï¼š`è®¿é—®è®°å½•å·²ä¿å­˜: {...}`
4. **å¦‚æœçœ‹åˆ°é”™è¯¯**ï¼Œè¯·ç»§ç»­é˜…è¯»ä¸‹é¢çš„æ•…éšœæ’æŸ¥

### æµ‹è¯• 2ï¼šæ£€æŸ¥ Firestore æ•°æ®

1. è®¿é—® Firebase Consoleï¼šhttps://console.firebase.google.com/project/visamap-884ae/firestore
2. åº”è¯¥èƒ½çœ‹åˆ° `visits` é›†åˆ
3. ç‚¹å¼€é›†åˆï¼Œåº”è¯¥èƒ½çœ‹åˆ°è®¿é—®è®°å½•

### æµ‹è¯• 3ï¼šæŸ¥çœ‹ç»Ÿè®¡é¡µé¢

1. è®¿é—®ï¼šhttps://figsama.github.io/2026qzdt/è®¿é—®ç»Ÿè®¡åœ°å›¾.html
2. åº”è¯¥èƒ½çœ‹åˆ°ï¼š
   - æ€»è®¿é—®é‡ã€åŸå¸‚æ•°ç­‰ç»Ÿè®¡
   - ä¸­å›½åœ°å›¾ä¸Šçš„è®¿å®¢åˆ†å¸ƒ
   - è®¿é—®åŸå¸‚æ’è¡Œæ¦œ

## ğŸ› å¯èƒ½é‡åˆ°çš„é—®é¢˜

### é—®é¢˜ 1ï¼šæ§åˆ¶å°æ˜¾ç¤º "Permission denied"

**åŸå› **ï¼šFirestore æœªå¯ç”¨æˆ–å®‰å…¨è§„åˆ™æœªé…ç½®

**è§£å†³**ï¼š
1. ç¡®ä¿åœ¨ Firebase Console å¯ç”¨äº† **Firestore Database**ï¼ˆä¸æ˜¯ Realtime Databaseï¼‰
2. æ£€æŸ¥å®‰å…¨è§„åˆ™æ˜¯å¦å…è®¸è¯»å†™ `visits` é›†åˆ

### é—®é¢˜ 2ï¼šæ§åˆ¶å°æ˜¾ç¤º "Firestore is not enabled"

**åŸå› **ï¼šæ‚¨çš„é¡¹ç›®ä¸­è¿˜æ²¡æœ‰å¯ç”¨ Firestore

**è§£å†³**ï¼šæŒ‰ç…§ä¸Šé¢"æ­¥éª¤ 1ï¼šå¯ç”¨ Firestore Database"æ“ä½œ

### é—®é¢˜ 3ï¼šæ˜¾ç¤º databaseURL ç›¸å…³é”™è¯¯

**åŸå› **ï¼šè¿™æ˜¯å› ä¸ºæ‚¨çš„é¡¹ç›®åŒæ—¶å¯ç”¨äº† Realtime Database

**è§£å†³**ï¼š
- è¿™ä¸å½±å“ Firestore çš„ä½¿ç”¨
- å¯ä»¥å¿½ç•¥ Realtime Database çš„é”™è¯¯
- æˆ–è€…åœ¨ Firebase Console ä¸­ç¦ç”¨ Realtime Database

### é—®é¢˜ 4ï¼šåŸå¸‚æ˜¾ç¤ºä¸º"æœªçŸ¥"

**è¯´æ˜**ï¼šè¿™æ˜¯æ­£å¸¸çš„ï¼Œå¯èƒ½åŸå› ï¼š
- IP å®šä½ API è¯·æ±‚å¤±è´¥ï¼ˆä¼šè‡ªåŠ¨é‡è¯•ï¼‰
- è®¿å®¢ä½¿ç”¨äº† VPN
- IP æ•°æ®åº“ä¸­æ²¡æœ‰è¯¥ IP çš„ä¿¡æ¯

## ğŸ“Š æŸ¥çœ‹æ•°æ®çš„æ–¹æ³•

### æ–¹æ³• 1ï¼šåœ¨ç½‘ç«™ä¸ŠæŸ¥çœ‹
è®¿é—®ï¼šhttps://figsama.github.io/2026qzdt/è®¿é—®ç»Ÿè®¡åœ°å›¾.html

### æ–¹æ³• 2ï¼šåœ¨ Firebase Console æŸ¥çœ‹
è®¿é—®ï¼šhttps://console.firebase.google.com/project/visamap-884ae/firestore

### æ–¹æ³• 3ï¼šæŸ¥çœ‹åŸå§‹æ•°æ®
åœ¨ Firestore Database ä¸­ï¼Œæ¯æ¡è®¿é—®è®°å½•åŒ…å«ï¼š
- IP åœ°å€
- åŸå¸‚ã€çœä»½ã€å›½å®¶
- æµè§ˆå™¨ã€æ“ä½œç³»ç»Ÿ
- è®¿é—®æ—¶é—´
- æ¥æºç½‘ç«™

## ğŸ¯ ä¸‹ä¸€æ­¥

1. âœ… åœ¨ Firebase Console å¯ç”¨ Firestore Database
2. âœ… é…ç½®å®‰å…¨è§„åˆ™
3. âœ… æäº¤ä»£ç åˆ° GitHub
4. âœ… ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆ1-2 åˆ†é’Ÿï¼‰
5. âœ… è®¿é—®ç½‘ç«™æµ‹è¯•
6. âœ… æŸ¥çœ‹ç»Ÿè®¡é¡µé¢

## ğŸ’¡ æç¤º

- **æ¸…é™¤ç¼“å­˜**ï¼šå¦‚æœä¿®æ”¹åæ²¡æœ‰ç”Ÿæ•ˆï¼Œè¯·æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼ˆCtrl+Shift+Deleteï¼‰
- **æ— ç—•æ¨¡å¼**ï¼šå¯ä»¥åœ¨æ— ç—•æ¨¡å¼ä¸‹æµ‹è¯•ï¼Œé¿å…ç¼“å­˜å½±å“
- **è€å¿ƒç­‰å¾…**ï¼šGitHub Pages éƒ¨ç½²éœ€è¦ 1-2 åˆ†é’Ÿï¼Œä¸æ˜¯å³æ—¶çš„

## ğŸ‰ å®Œæˆï¼

é…ç½®æ–‡ä»¶å·²å…¨éƒ¨æ›´æ–°å®Œæˆï¼ç°åœ¨æ‚¨åªéœ€è¦ï¼š
1. åœ¨ Firebase Console å¯ç”¨ Firestore
2. æ¨é€ä»£ç åˆ° GitHub
3. æµ‹è¯•åŠŸèƒ½

ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼å¦‚æœ‰é—®é¢˜éšæ—¶åé¦ˆã€‚
